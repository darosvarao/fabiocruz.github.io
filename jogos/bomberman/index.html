<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bomberman Neon - Cyberpunk Edition</title>
    <link rel="stylesheet" href="css/neon-style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0a0a0a">
    
    <!-- Meta tags para PWA -->
    <meta name="description" content="Bomberman Neon - Edi√ß√£o Cyberpunk com Axol, Bisou e Pepeca">
    <meta name="keywords" content="bomberman, neon, cyberpunk, jogo, axol, bisou, pepeca">
    
    <!-- Preload dos sprites principais -->
    <link rel="preload" href="assets/sprites/characters/axol_neon.png" as="image">
    <link rel="preload" href="assets/sprites/characters/bisou_neon.png" as="image">
    <link rel="preload" href="assets/sprites/characters/pepeca_neon.png" as="image">
</head>
<body>
    <!-- Efeito de part√≠culas de fundo -->
    <div id="particles-bg"></div>
    
    <!-- Loading Screen -->
    <div id="loading" class="screen">
        <div class="loading-container">
            <div class="neon-logo">
                <h1>BOMBERMAN</h1>
                <h2>NEON EDITION</h2>
            </div>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p class="loading-text">Carregando matriz cyberpunk...</p>
        </div>
    </div>

    <!-- Menu Principal -->
    <div id="mainMenu" class="screen hidden">
        <div class="menu-container">
            <div class="neon-title">
                <h1 class="glitch" data-text="BOMBERMAN NEON">BOMBERMAN NEON</h1>
                <p class="subtitle">CYBERPUNK EDITION</p>
            </div>
            
            <div class="character-preview">
                <div class="character-showcase">
                    <img src="assets/sprites/characters/axol_neon.png" alt="Axol Neon" class="character-img active">
                    <img src="assets/sprites/characters/bisou_neon.png" alt="Bisou Neon" class="character-img">
                    <img src="assets/sprites/characters/pepeca_neon.png" alt="Pepeca Neon" class="character-img">
                </div>
            </div>
            
            <div class="menu-buttons">
                <button id="startGame" class="neon-btn primary">
                    <span class="btn-text">INICIAR MISS√ÉO</span>
                    <span class="btn-glow"></span>
                </button>
                <button id="selectCharacter" class="neon-btn secondary">
                    <span class="btn-text">SELECIONAR AGENTE</span>
                    <span class="btn-glow"></span>
                </button>
                <button id="instructions" class="neon-btn tertiary">
                    <span class="btn-text">PROTOCOLO</span>
                    <span class="btn-glow"></span>
                </button>
            </div>
        </div>
    </div>

    <!-- Sele√ß√£o de Personagem -->
    <div id="characterSelect" class="screen hidden">
        <div class="character-select-container">
            <h2 class="section-title">SELECIONAR AGENTE</h2>
            <div class="characters-grid">
                <div class="character-option selected" data-character="axol">
                    <div class="character-card">
                        <img src="assets/sprites/characters/axol_neon.png" alt="Axol">
                        <h3>AXOL</h3>
                        <p>Agente Aqu√°tico</p>
                        <div class="stats">
                            <div class="stat">
                                <span>Velocidade:</span>
                                <div class="stat-bar"><div class="stat-fill" style="width: 80%"></div></div>
                            </div>
                            <div class="stat">
                                <span>Resist√™ncia:</span>
                                <div class="stat-bar"><div class="stat-fill" style="width: 90%"></div></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="character-option" data-character="bisou">
                    <div class="character-card">
                        <img src="assets/sprites/characters/bisou_neon.png" alt="Bisou">
                        <h3>BISOU</h3>
                        <p>Agente Furtivo</p>
                        <div class="stats">
                            <div class="stat">
                                <span>Velocidade:</span>
                                <div class="stat-bar"><div class="stat-fill" style="width: 95%"></div></div>
                            </div>
                            <div class="stat">
                                <span>Agilidade:</span>
                                <div class="stat-bar"><div class="stat-fill" style="width: 100%"></div></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="character-option" data-character="pepeca">
                    <div class="character-card">
                        <img src="assets/sprites/characters/pepeca_neon.png" alt="Pepeca">
                        <h3>PEPECA</h3>
                        <p>Agente Pesado</p>
                        <div class="stats">
                            <div class="stat">
                                <span>For√ßa:</span>
                                <div class="stat-bar"><div class="stat-fill" style="width: 100%"></div></div>
                            </div>
                            <div class="stat">
                                <span>Resist√™ncia:</span>
                                <div class="stat-bar"><div class="stat-fill" style="width: 85%"></div></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="character-select-buttons">
                <button id="backToMenu" class="neon-btn secondary">VOLTAR</button>
                <button id="confirmCharacter" class="neon-btn primary">CONFIRMAR</button>
            </div>
        </div>
    </div>

    <!-- Instru√ß√µes -->
    <div id="instructionsScreen" class="screen hidden">
        <div class="instructions-container">
            <h2 class="section-title">PROTOCOLO DE MISS√ÉO</h2>
            <div class="instructions-content">
                <div class="instruction-block">
                    <h3>CONTROLES</h3>
                    <div class="controls-grid">
                        <div class="control-item">
                            <span class="key">‚Üë‚Üì‚Üê‚Üí</span>
                            <span>Movimento</span>
                        </div>
                        <div class="control-item">
                            <span class="key">ESPA√áO</span>
                            <span>Bomba EMP</span>
                        </div>
                        <div class="control-item">
                            <span class="key">ESC</span>
                            <span>Pausar</span>
                        </div>
                    </div>
                </div>
                
                <div class="instruction-block">
                    <h3>OBJETIVO</h3>
                    <p>Destrua todas as estruturas da matriz e elimine amea√ßas usando bombas EMP.</p>
                </div>
                
                <div class="instruction-block">
                    <h3>POWER-UPS</h3>
                    <div class="powerups-grid">
                        <div class="powerup-item">
                            <span class="powerup-icon speed">‚ö°</span>
                            <span>Boost de Velocidade</span>
                        </div>
                        <div class="powerup-item">
                            <span class="powerup-icon bomb">üí£</span>
                            <span>Bombas Extras</span>
                        </div>
                        <div class="powerup-item">
                            <span class="powerup-icon range">üî•</span>
                            <span>Alcance Ampliado</span>
                        </div>
                    </div>
                </div>
            </div>
            <button id="backToMenuFromInstructions" class="neon-btn secondary">VOLTAR</button>
        </div>
    </div>

    <!-- Tela do Jogo -->
    <div id="gameScreen" class="screen hidden">
        <div class="game-container">
            <div class="game-hud">
                <div class="hud-left">
                    <div class="stat-display">
                        <span class="stat-label">PONTOS:</span>
                        <span id="score" class="stat-value">0</span>
                    </div>
                    <div class="stat-display">
                        <span class="stat-label">N√çVEL:</span>
                        <span id="level" class="stat-value">1</span>
                    </div>
                </div>
                <div class="hud-center">
                    <button id="pauseBtn" class="hud-btn">‚è∏</button>
                </div>
                <div class="hud-right">
                    <div class="stat-display">
                        <span class="stat-label">VIDAS:</span>
                        <span id="lives" class="stat-value">3</span>
                    </div>
                </div>
            </div>
            
            <div class="game-area">
                <canvas id="gameCanvas" width="800" height="600"></canvas>
            </div>
            
            <!-- Controles Touch -->
            <div id="touchControls" class="touch-controls">
                <div class="dpad">
                    <button class="dpad-btn up" data-direction="up">‚Üë</button>
                    <button class="dpad-btn left" data-direction="left">‚Üê</button>
                    <button class="dpad-btn center"></button>
                    <button class="dpad-btn right" data-direction="right">‚Üí</button>
                    <button class="dpad-btn down" data-direction="down">‚Üì</button>
                </div>
                <div class="action-buttons">
                    <button id="bombBtn" class="action-btn">üí£</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Over -->
    <div id="gameOverScreen" class="screen hidden">
        <div class="gameover-container">
            <h2 class="gameover-title glitch" data-text="MISS√ÉO FALHOU">MISS√ÉO FALHOU</h2>
            <div class="final-stats">
                <p>Pontua√ß√£o Final: <span id="finalScore">0</span></p>
                <p>N√≠vel Alcan√ßado: <span id="finalLevel">1</span></p>
            </div>
            <div class="gameover-buttons">
                <button id="playAgain" class="neon-btn primary">NOVA MISS√ÉO</button>
                <button id="backToMenuFromGameOver" class="neon-btn secondary">MENU PRINCIPAL</button>
            </div>
        </div>
    </div>

    <!-- Pause -->
    <div id="pauseScreen" class="screen hidden">
        <div class="pause-container">
            <h2 class="pause-title">MISS√ÉO PAUSADA</h2>
            <div class="pause-buttons">
                <button id="resumeGame" class="neon-btn primary">CONTINUAR</button>
                <button id="backToMenuFromPause" class="neon-btn secondary">MENU PRINCIPAL</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/neon-map.js"></script>
    <script src="js/neon-player.js"></script>
    <script src="js/neon-bomb.js"></script>
    <script src="js/neon-explosion.js"></script>
    <script src="js/neon-powerup.js"></script>
    <script src="js/neon-game.js"></script>
    <script src="js/neon-ui.js"></script>
    <script>
        // INICIALIZA√á√ÉO PRINCIPAL DO JOGO
        class BombermanNeonApp {
            constructor() {
                this.currentScreen = 'loading';
                this.selectedCharacter = 'axol';
                this.game = null;
                this.ui = null;
                
                this.init();
            }
            
            init() {
                console.log('Inicializando Bomberman Neon...');
                this.setupEventListeners();
                this.showLoadingScreen();
                
                // Simular carregamento
                setTimeout(() => {
                    this.showMainMenu();
                }, 3000);
            }
            
            setupEventListeners() {
                // Menu buttons
                document.getElementById('startGame').addEventListener('click', () => this.startGame());
                document.getElementById('selectCharacter').addEventListener('click', () => this.showCharacterSelect());
                document.getElementById('instructions').addEventListener('click', () => this.showInstructions());
                
                // Character selection
                document.querySelectorAll('.character-option').forEach(option => {
                    option.addEventListener('click', (e) => {
                        document.querySelectorAll('.character-option').forEach(opt => opt.classList.remove('selected'));
                        option.classList.add('selected');
                        this.selectedCharacter = option.dataset.character;
                        console.log('Personagem selecionado:', this.selectedCharacter);
                    });
                });
                
                // Back buttons
                document.getElementById('backToMenu').addEventListener('click', () => this.showMainMenu());
                document.getElementById('confirmCharacter').addEventListener('click', () => this.showMainMenu());
                document.getElementById('backToMenuFromInstructions').addEventListener('click', () => this.showMainMenu());
                document.getElementById('backToMenuFromGameOver').addEventListener('click', () => this.showMainMenu());
                document.getElementById('backToMenuFromPause').addEventListener('click', () => this.showMainMenu());
                
                // Game controls
                document.getElementById('pauseBtn').addEventListener('click', () => this.pauseGame());
                document.getElementById('resumeGame').addEventListener('click', () => this.resumeGame());
                document.getElementById('playAgain').addEventListener('click', () => this.startGame());
                
                // Touch controls
                document.querySelectorAll('.dpad-btn').forEach(btn => {
                    if (btn.dataset.direction) {
                        btn.addEventListener('touchstart', (e) => {
                            e.preventDefault();
                            if (this.game) {
                                this.game.handleInput(btn.dataset.direction, true);
                            }
                        });
                        btn.addEventListener('touchend', (e) => {
                            e.preventDefault();
                            if (this.game) {
                                this.game.handleInput(btn.dataset.direction, false);
                            }
                        });
                        btn.addEventListener('mousedown', (e) => {
                            e.preventDefault();
                            if (this.game) {
                                this.game.handleInput(btn.dataset.direction, true);
                            }
                        });
                        btn.addEventListener('mouseup', (e) => {
                            e.preventDefault();
                            if (this.game) {
                                this.game.handleInput(btn.dataset.direction, false);
                            }
                        });
                    }
                });
                
                document.getElementById('bombBtn').addEventListener('click', () => {
                    if (this.game) {
                        this.game.placeBomb();
                    }
                });
                
                // Keyboard controls
                document.addEventListener('keydown', (e) => this.handleKeyDown(e));
                document.addEventListener('keyup', (e) => this.handleKeyUp(e));
                
                console.log('Event listeners configurados');
            }
            
            handleKeyDown(e) {
                if (this.currentScreen === 'gameScreen' && this.game) {
                    switch(e.code) {
                        case 'ArrowUp':
                        case 'KeyW':
                            e.preventDefault();
                            this.game.handleInput('up', true);
                            console.log('Tecla UP pressionada');
                            break;
                        case 'ArrowDown':
                        case 'KeyS':
                            e.preventDefault();
                            this.game.handleInput('down', true);
                            console.log('Tecla DOWN pressionada');
                            break;
                        case 'ArrowLeft':
                        case 'KeyA':
                            e.preventDefault();
                            this.game.handleInput('left', true);
                            console.log('Tecla LEFT pressionada');
                            break;
                        case 'ArrowRight':
                        case 'KeyD':
                            e.preventDefault();
                            this.game.handleInput('right', true);
                            console.log('Tecla RIGHT pressionada');
                            break;
                        case 'Space':
                            e.preventDefault();
                            this.game.placeBomb();
                            console.log('BOMBA colocada');
                            break;
                        case 'Escape':
                            e.preventDefault();
                            this.pauseGame();
                            break;
                    }
                }
            }
            
            handleKeyUp(e) {
                if (this.currentScreen === 'gameScreen' && this.game) {
                    switch(e.code) {
                        case 'ArrowUp':
                        case 'KeyW':
                            this.game.handleInput('up', false);
                            break;
                        case 'ArrowDown':
                        case 'KeyS':
                            this.game.handleInput('down', false);
                            break;
                        case 'ArrowLeft':
                        case 'KeyA':
                            this.game.handleInput('left', false);
                            break;
                        case 'ArrowRight':
                        case 'KeyD':
                            this.game.handleInput('right', false);
                            break;
                    }
                }
            }
            
            showScreen(screenId) {
                document.querySelectorAll('.screen').forEach(screen => {
                    screen.classList.add('hidden');
                });
                document.getElementById(screenId).classList.remove('hidden');
                this.currentScreen = screenId;
                console.log('Tela atual:', screenId);
            }
            
            showLoadingScreen() {
                this.showScreen('loading');
            }
            
            showMainMenu() {
                this.showScreen('mainMenu');
                if (this.game) {
                    this.game.destroy();
                    this.game = null;
                }
            }
            
            showCharacterSelect() {
                this.showScreen('characterSelect');
            }
            
            showInstructions() {
                this.showScreen('instructionsScreen');
            }
            
            startGame() {
                console.log('Iniciando jogo com personagem:', this.selectedCharacter);
                this.showScreen('gameScreen');
                
                const canvas = document.getElementById('gameCanvas');
                this.game = new NeonGame(canvas, this.selectedCharacter);
                this.ui = new NeonUI();
                
                this.game.onGameOver = (score, level) => {
                    this.showGameOver(score, level);
                };
                
                this.game.onScoreUpdate = (score, level, lives) => {
                    this.ui.updateHUD(score, level, lives);
                };
                
                this.game.start();
                console.log('Jogo iniciado!');
            }
            
            pauseGame() {
                if (this.game) {
                    this.game.pause();
                    this.showScreen('pauseScreen');
                }
            }
            
            resumeGame() {
                if (this.game) {
                    this.game.resume();
                    this.showScreen('gameScreen');
                }
            }
            
            showGameOver(score, level) {
                document.getElementById('finalScore').textContent = score;
                document.getElementById('finalLevel').textContent = level;
                this.showScreen('gameOverScreen');
            }
        }

        // Inicializar quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM carregado, inicializando app...');
            window.bombermanApp = new BombermanNeonApp();
        });
    </script>
</body>
</html>

